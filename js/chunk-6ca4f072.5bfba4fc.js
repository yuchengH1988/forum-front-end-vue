(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ca4f072"],{"571a":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container py-5"},[e("NavTabs"),t.isLoading?e("Spinner"):[e("h1",{staticClass:"mt-5"},[t._v("人氣餐廳")]),e("hr"),t._l(t.restaurants,(function(t){return e("TopRestaurant",{key:t.id,attrs:{"initial-restaurant":t}})}))]],2)},n=[],i=e("1da1"),s=(e("96cf"),e("8bb1")),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card mb-3",staticStyle:{"max-width":"540px",margin:"auto"}},[e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-md-4"},[e("a",{attrs:{href:t.restaurant.image}},[e("img",{staticClass:"card-img",attrs:{src:t._f("emptyImage")(t.restaurant.image)}})])]),e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.restaurant.name))]),e("span",{staticClass:"badge badge-secondary"},[t._v("收藏數："+t._s(t.restaurant.FavoriteCount))]),e("p",{staticClass:"card-text"},[t._v("\n          "+t._s(t.restaurant.description)+"\n        ")]),e("router-link",{staticClass:"btn btn-primary mr-2",attrs:{to:{name:"restaurant",params:{id:t.restaurant.id}}}},[t._v("Show")]),t.restaurant.isFavorited?e("button",{staticClass:"btn btn-danger mr-2",attrs:{type:"button"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.deleteFavorite(t.restaurant.id)}}},[t._v("\n          移除最愛\n        ")]):e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.addFavorite(t.restaurant.id)}}},[t._v("\n          加到最愛\n        ")])],1)])])])},c=[],u=e("5530"),l=(e("b0c0"),e("a4d3"),e("e01a"),e("2708")),d=e("4cce"),v=e("2fa3"),p={mixins:[l["a"]],props:{initialRestaurant:{type:Object,required:!0}},data:function(){return{restaurant:{id:this.initialRestaurant.id,name:this.initialRestaurant.name,image:this.initialRestaurant.image,openingHours:this.initialRestaurant.openingHours,tel:this.initialRestaurant.tel,address:this.initialRestaurant.address,description:this.initialRestaurant.description,createdAt:this.initialRestaurant.createdAt,isFavorited:this.initialRestaurant.isFavorited,FavoriteCount:this.initialRestaurant.FavoriteCount}}},methods:{addFavorite:function(t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].addFavorite({restaurantId:t});case 3:if(r=e.sent,n=r.data,"success"===n.status){e.next=7;break}throw new Error(n.message);case 7:a.restaurant=Object(u["a"])(Object(u["a"])({},a.restaurant),{},{isFavorited:!0,FavoriteCount:a.restaurant.FavoriteCount+1}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),v["a"].fire({icon:"error",title:"無法將餐廳加入最愛，請稍後在試"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},deleteFavorite:function(t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].deleteFavorite({restaurantId:t});case 3:if(r=e.sent,n=r.data,"success"===n.status){e.next=7;break}throw new Error(n.message);case 7:a.restaurant=Object(u["a"])(Object(u["a"])({},a.restaurant),{},{isFavorited:!1,FavoriteCount:a.restaurant.FavoriteCount-1}),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),v["a"].fire({icon:"error",title:"無法將餐廳移除最愛，請稍後再試"}),console.log("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},f=p,m=e("2877"),b=Object(m["a"])(f,o,c,!1,null,null,null),h=b.exports,g=e("c4c3"),w=e("2375"),R={name:"RestaurantsTop",data:function(){return{restaurants:[],isLoading:!0}},methods:{fetchRestaurants:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g["a"].getRestaurantsTop();case 3:e=a.sent,r=e.data,t.restaurants=r.restaurants,t.isLoading=!1,a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),t.isLoading=!1,v["a"].fire({icon:"error",title:"無法成功載入人氣餐廳，請稍後再試"});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()}},components:{NavTabs:s["a"],TopRestaurant:h,Spinner:w["a"]},created:function(){this.fetchRestaurants()}},C=R,y=Object(m["a"])(C,r,n,!1,null,null,null);a["default"]=y.exports},e01a:function(t,a,e){"use strict";var r=e("23e7"),n=e("83ab"),i=e("da84"),s=e("5135"),o=e("861d"),c=e("9bf2").f,u=e("e893"),l=i.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),a=this instanceof v?new l(t):void 0===t?l():l(t);return""===t&&(d[a]=!0),a};u(v,l);var p=v.prototype=l.prototype;p.constructor=v;var f=p.toString,m="Symbol(test)"==String(l("test")),b=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,a=f.call(t);if(s(d,t))return"";var e=m?a.slice(7,-1):a.replace(b,"$1");return""===e?void 0:e}}),r({global:!0,forced:!0},{Symbol:v})}}}]);
//# sourceMappingURL=chunk-6ca4f072.5bfba4fc.js.map